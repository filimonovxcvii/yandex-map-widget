<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Карта локаций</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #fefaf6;
      color: #333;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background-color: #f36f21;
      color: white;
      padding: 16px;
      font-size: 22px;
      text-align: center;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    #map {
      flex: 1;
      height: 100%;
    }

    .search-box {
      position: absolute;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      background: white;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 12px 20px;
      width: 80%;
      max-width: 400px;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .search-box input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 16px;
    }

    .search-box button {
      background: #f36f21;
      color: white;
      border: none;
      border-radius: 14px;
      padding: 6px 14px;
      cursor: pointer;
      font-weight: bold;
    }

    .save-button {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background-color: #f36f21;
      color: white;
      border: none;
      border-radius: 20px;
      padding: 12px 24px;
      font-size: 16px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      cursor: pointer;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <header>
    Стати Собаки: Карта локаций
  </header>

  <div class="search-box">
    <input type="text" id="search" placeholder="Поиск: приюты, кафе, груминг и т.д.">
    <button onclick="searchPlace()">Найти</button>
  </div>

  <div id="map"></div>

  <button class="save-button" onclick="saveLocation()">Сохранить местоположение</button>

  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=ВАШ_API_КЛЮЧ" type="text/javascript"></script>
  <script>
    let map;
    ymaps.ready(init);

    function init() {
      map = new ymaps.Map("map", {
        center: [55.751574, 37.573856],
        zoom: 10,
        controls: ['zoomControl']
      });

      // Категории — метки
      const categories = [
        { coords: [55.751, 37.57], name: "Пропала собака", color: 'red' },
        { coords: [55.761, 37.58], name: "Нашлась собака", color: 'green' },
        { coords: [55.771, 37.56], name: "Видели собаку", color: 'orange' },
        { coords: [55.741, 37.55], name: "Событие", color: 'blue' },
        { coords: [55.731, 37.59], name: "Насилие", color: 'black' }
      ];

      categories.forEach(cat => {
        const placemark = new ymaps.Placemark(cat.coords, {
          balloonContent: cat.name
        }, {
          preset: 'islands#icon',
          iconColor: cat.color
        });
        map.geoObjects.add(placemark);
      });
    }

    function searchPlace() {
      const query = document.getElementById("search").value;
      if (!query) return;
      ymaps.geocode(query).then(function (res) {
        const firstGeoObject = res.geoObjects.get(0);
        if (firstGeoObject) {
          const coords = firstGeoObject.geometry.getCoordinates();
          map.setCenter(coords, 14);
        }
      });
    }

    function saveLocation() {
      const center = map.getCenter();
      alert(`Сохранено местоположение: ${center}`);
      // Здесь можно отправить данные на сервер или в Supabase
    }
  </script>
</body>
</html>
